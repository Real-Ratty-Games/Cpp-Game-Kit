/*======================================================
	Copyright (c) 2026 Real Ratty Games.
	Created by Norbert Gerberg.
======================================================*/
#ifndef DRAWSURFACE_HPP_
#define DRAWSURFACE_HPP_
#include "API.hpp"
#include "SystemTypes.hpp"
#include "DrawData.hpp"

namespace GameEngine
{
	class GAMEENGINEAPI DrawSurface
	{
	public:
		DrawSurface(uint16 viewid, vec2 size, void* wndHandle);
		void Release();
		void Clear();
		void OnResize(vec2 size);
		uint16 ViewID() const;
		Texture& GetTexture();

	protected:
		void DestroyFB();
		void SetFBViewId();
		virtual void UpdateFB(vec2i texSize, bgfx::TextureFormat::Enum format = bgfx::TextureFormat::RGBA8) = 0;

	public:
		vec2i					Location;
		vec2					Resolution;
		float					AspectRatio;
		uint					ClearColor;
		bool					bTopMost;
		bool					bTransparent;

	protected:
		bgfx::FrameBufferHandle mFbHandle;
		Texture					mFbTex;

		uint16					mViewId;
		void*					pWindowHandle;
	};
}
#endif